---
import MainLayout from '../../../layouts/MainLayout.astro';
import KanunView from '../../../views/pages/KanunView';
import { getAllTck } from '../../../lib/kanunlar';

export async function getStaticPaths() {
  const laws = await getAllTck();
  return laws.map((law) => ({
    params: { slug: law.slug },
    props: { law },
  }));
}

const { law } = Astro.props;

const title = `${law.title} | RS Avukatlık`;
const description = law.excerpt || `5237 Sayılı Türk Ceza Kanunu ${law.title} açıklaması, avukat değerlendirmesi ve emsal kararlar.`;
const canonical = `https://www.rsavukatlik.com/kanunlar/tck/${law.slug}`;

const schema = {
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": title,
  "description": description,
  "author": {
    "@type": "Person",
    "name": "Av. Ramazan Şimşek",
    "url": "https://www.rsavukatlik.com"
  },
  "publisher": {
    "@type": "LegalService",
    "name": "RS Avukatlık",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.rsavukatlik.com/logo.png"
    }
  },
  "datePublished": law.date,
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": canonical
  }
};
---

<MainLayout title={title} description={description} canonical={canonical} schema={schema}>
  <KanunView client:load law={law} />
</MainLayout>
